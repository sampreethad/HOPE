{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
</head>
<body id="style-2" style="overflow-y: hidden;">
    <div class="login-wrapper">
        <div class="main" style="margin-top: -180px;">
            <h2 style="position: absolute;top: 20px;right: 20px;color: black;z-index: 100;font-size: 15px;" onclick="closeLogin()"><i class="fa-solid fa-x"></i></h2>
            <img src="{% static 'images/66841-medicine-capsule.gif' %}" alt="" style="width: 80px;transform: rotate(90deg); margin-bottom: 28px;">
            <h1 style="color: black;">Signin</h1>
            <p>Login into your account now</p>
    
            <div class="inputs">
                <input type="text" placeholder="username" class="userName" style="margin-bottom: 10px;"><br>
                <input type="password" placeholder="password" class="password"><br>
            </div>
            <p style="display: none;justify-content: center;align-items: center;width: 100%;margin-top: 25px;opacity: 1;margin-bottom: 10px;" class="error">Invalid login credentials</p>

            <button onclick="sendData()">Login into my account</button>
        </div>
    </div>
    <div class="wrap">
    
        
        <div class="payment" style="position: relative;z-index: 10;display: none;position: absolute;top: 190px;backdrop-filter: blur(8px);width: 830px;height: 350px;flex-direction: column;justify-content: center;align-items: center;background-color: rgba(255, 255, 255);border-radius: 10px;">
            <img src="{% static 'images/141987-rupee-thanks-card.gif' %}" alt="" style="width: 150px;margin-top: 5px;margin-bottom: 15px;">
            <h3 style="text-align: center;">Payment</h3>
            <h5 style="text-align: center;font-size: 15px;padding: 0px;margin-right: 0;font-weight: 500;">Select your mode of payment</h5>
            <h2 style="width: 40px;height: 40px;background-color: #e0e0e0;color: rgb(44, 44, 44);display: flex;justify-content: center;align-items: center;position: absolute;top: 25px;left: 25px;cursor: pointer;border-radius: 150px;font-size: 19px;" onclick="backView()"><i class="fa-solid fa-arrow-left"></i></h2>
    
            <div class="category" style="z-index: 1;position: relative;margin-top: 15px;">
                <h3 style="background-color: #2c5e8c;color: white;border: 2px solid white;" onclick="changeTabPayment(1,this)" class="he">UPI</h3>
                <h3 class="fr" onclick="changeTabPayment(2,this)">Cash On Delivery</h3>
                <h3 class="ve" onclick="changeTabPayment(3,this)">Debit Card</h3>
            </div>
            
            <div style="display: flex;justify-content: center;align-items: center;gap: 15px;margin-top: 15px;" class="upi-pay">
                
                <input type="text" placeholder="Enter your upi@id" style="padding: 10px;border: 2px solid rgb(217, 217, 217);background-color: white;outline: none;width: 270px;border-radius: 8px;" class="upi">
                <h2 style="width: 190px;height: 45px;background-color: #2a2a2a;color: white;display: flex;justify-content: center;align-items: center;position: relative;cursor: pointer;border-radius: 5px;font-size: 17px;font-weight: 600;gap: 10px;" onclick="buyNow(this)" class="buyBtn"><ion-icon name="wallet-outline" style="color: #07a44b;"></ion-icon> Buy now</h2>
                
            </div>
    
            <div style="display: none;justify-content: center;align-items: center;gap: 15px;margin-top: 15px;" class="address">
                
                <input type="text" placeholder="Enter delivery address" style="padding: 10px;border: 2px solid rgb(217, 217, 217);background-color: white;outline: none;width: 270px;border-radius: 8px;" class="add">
                <input type="number" placeholder="pincode" style="padding: 10px;border: 2px solid rgb(217, 217, 217);background-color: white;outline: none;width: 100px;border-radius: 8px;" class="pin">
                <h2 style="width: 190px;height: 45px;background-color: #3baa5a;color: white;display: flex;justify-content: center;align-items: center;position: relative;cursor: pointer;border-radius: 5px;font-size: 17px;font-weight: 600;gap: 10px;background-color: #2a2a2a;" onclick="buyNowAddress(this)" class="buyBtn"><ion-icon name="wallet-outline"></ion-icon> Place Order</h2>
    
            </div>
    
            <div style="display: none;justify-content: center;align-items: center;gap: 15px;margin-top: 15px;" class="debit">
                
                <input type="number" placeholder="Enter account number" style="padding: 10px;border: 2px solid rgb(217, 217, 217);background-color: white;outline: none;width: 270px;border-radius: 8px;" class="acc">
                <input type="number" placeholder="ccv" style="padding: 10px;border: 2px solid rgb(217, 217, 217);background-color: white;outline: none;width: 70px;border-radius: 8px;" class="ccv">
                <h2 style="width: 190px;height: 45px;background-color: #3baa5a;color: white;display: flex;justify-content: center;align-items: center;position: relative;cursor: pointer;border-radius: 5px;font-size: 17px;font-weight: 600;gap: 10px;background-color: #2a2a2a;" onclick="buyNowDebit(this)" class="buyBtn"><ion-icon name="wallet-outline"></ion-icon> Buy now</h2>
    
            </div>
        </div>
    
        <div class="view" style="padding-bottom: 35px;">
            <img src="{% static 'images/64997-cart.gif' %}" alt="" style="width: 120px;object-fit: contain;height: 120px;margin-top: 10px;">
        <!-- <p style="color: #138f82;font-weight: 600;margin-top: 25px;text-align: center;">ITEMS IN CART</p> -->
            <h1 style="margin-top: 15px;text-transform: uppercase;font-size: 25px;width: 350px;text-align: center;position: relative;z-index: 10;margin-top: -10px;">Your Cart <span style="color: #07a44b;">Items</span> </h1>
            <p style="margin-top:15px;font-weight: 600;opacity: 0.4;text-align: center;">Below are the products in cart</p>
            <h2 style="width: 40px;height: 40px;background-color: #30804d;color: rgb(255, 255, 255);display: flex;justify-content: center;align-items: center;position: absolute;top: 25px;left: 25px;cursor: pointer;border-radius: 150px;font-size: 19px;z-index: 1000;" onclick="back()"><i class="fa-solid fa-arrow-left"></i></h2>

        <!-- <img src="{{product.image.url}}" alt="" style="margin-top: 25px;position: relative;z-index: 1;object-fit: contain;"> -->
        <!-- <h3 style="margin-top: 0px;">{{product.name}}</h3> -->
        <!-- <h4 style="font-weight: 600;opacity: 0.6;" class="stockText">{{product.stock}} stocks left</h4> -->
        <img src="{% static 'images/pngwing.com.png' %}" alt="" style="position: absolute;width: 100%;height: 100%;opacity: 0.15;object-fit: cover;">
        <table style="position: relative;z-index: 1;width:850px;border: 1px solid white;transform: scale(0.9);">
                
            <tr style="height: 50px;">
                <th style="font-weight: 600;font-size: 15px;width: 15%;">Product Image</th>
                <th style="font-weight: 600;font-size: 15px;width: 30%;">Product Name</th>
                <th style="font-weight: 600;font-size: 15px;width: 10%;">Quantity</th>
                <!-- <th style="font-weight: 600;font-size: 15px;width: 20%;">Order Date</th> -->
                <th style="font-weight: 600;font-size: 15px;width: 10%;border-top-right-radius: 0px;">Price</th>
                {% if not profile.is_shopkeeper %}
                <th style="font-weight: 600;font-size: 15px;width: 15%;border-top-right-radius: 8px;">Option</th>
                {% endif %}
                <!-- <th style="font-weight: 600;font-size: 15px;width: 30%;">Transcation</th> -->

            </tr>
            
           {% for order in carts %}
            <tr style="background-color: white;">
                <td style="text-align: center;font-size: 14px;width: 190px;"><img src="{{order.product.image.url}}" alt="" style="width: 60px;mix-blend-mode: multiply;height: 60px;object-fit: contain;"></td>

                <td style="text-align: center;font-size: 14px;width: 190px;">{{order.product.name}}</td>

                <td style="text-align: center;font-size: 14px;width: 150px;">{{order.quantity}}</td>
                <!-- <td style="text-align: center;font-size: 14px;width: 150px;">{{order.date}}</td> -->
                <td style="text-align: center;font-size: 14px;width: 280px;">{{order.price}}</td>
                {% if not profile.is_shopkeeper %}
                <td style="text-align: center;font-size: 14px;width: 280px;"><a href="{% url 'cartDeleteAll' pk=order.pk %}" style="cursor: pointer;text-decoration: none;"><button style="background-color: #a93232;color: white;border: none;outline: none;padding: 8px 15px 8px 15px;border-radius: 5px;cursor: pointer;text-decoration: none;"><ion-icon name="trash"></ion-icon> Delete</button></a></td>
                {% endif %}
                <!-- <td style="font-weight: 400;"><button style="padding: 10px;background-color: #2d919a;color: white;font-weight: 400;width: 120px;border: none;outline: none;">Send Amount</button></td> -->
            </tr>
            {% endfor %}
            
            
            
            
        </table>
        {% if carts %}
        <img src="{% static 'images/116065-wallet-animation.gif' %}" alt="" style="width: 90px;object-fit: contain;height: 90px;margin-top: 20px;">
        <h3 style="margin-top: 20px;margin-bottom: 20px;">ORDER SUMMARY</h3>
        <table style="position: relative;z-index: 1;width:850px;border: 1px solid white;transform: scale(0.9);">
                
            <tr style="height: 50px;">
                <th style="font-weight: 600;font-size: 15px;width: 15%;">Username</th>
                <th style="font-weight: 600;font-size: 15px;width: 20%;">Address</th>
                <th style="font-weight: 600;font-size: 15px;width: 20%;">Total Items</th>
                <!-- <th style="font-weight: 600;font-size: 15px;width: 20%;">Order Date</th> -->
                <th style="font-weight: 600;font-size: 15px;width: 20%;border-top-right-radius: 0px;">Total Price</th>
              
                <th style="font-weight: 600;font-size: 15px;width: 30%;border-top-right-radius: 8px;">Transcation</th>

            </tr>
           
            <tr style="background-color: white;">
                <!-- <td style="text-align: center;font-size: 14px;width: 190px;"><img src="{{order.product.image.url}}" alt="" style="width: 60px;mix-blend-mode: multiply;height: 60px;object-fit: contain;"></td> -->

                <td style="text-align: center;font-size: 14px;width: 190px;">{{request.user.username}}</td>

                <td style="text-align: center;font-size: 14px;width: 150px;">{{profile.address}}</td>
                <!-- <td style="text-align: center;font-size: 14px;width: 150px;">{{order.date}}</td> -->
                <td style="text-align: center;font-size: 14px;width: 280px;">{{count}}</td>
                
                <td style="text-align: center;font-size: 14px;width: 280px;font-weight: 600;">₹{{total}}</td>
                <td style="text-align: center;font-size: 14px;width: 280px;"><a style="cursor: pointer;" onclick="payment()"><button style="background-color: #07a44b;color: white;border: none;outline: none;padding: 8px 15px 8px 15px;border-radius: 5px;cursor: pointer;"><ion-icon name="wallet"></ion-icon> Place Order</button></a></td>

                <!-- <td style="font-weight: 400;"><button style="padding: 10px;background-color: #2d919a;color: white;font-weight: 400;width: 120px;border: none;outline: none;">Send Amount</button></td> -->
            </tr>
            

        </table>
        {% endif %}
        <h3 class="out" style="display: none;font-size: 15px;">⚠️ We dont have enough stock left</h3>
    </div>

</div>



    <div class="signup-wrapper">
        <div class="main" style="width: 380px;margin-top: -160px;padding-left: 25px;">
            <h2 style="position: absolute;top: 20px;right: 20px;color: black;font-size: 15px;" onclick="closeSignup()"><i class="fa-solid fa-x"></i></ion-icon></h2>
            <img src="{% static 'images/66841-medicine-capsule.gif' %}" alt="" style="width: 80px;transform: rotate(90deg); margin-bottom: 28px;">
            <h1  style="color: black;">Signup</h1>
            <p>Create your new account now</p>
    
            <div class="inputs inps">
                <div style="display: flex;justify-content: center;align-items: center;gap: 10px;width: 100%;">

                    <input type="text" placeholder="username" class="username1"><br>
                    <input type="email" placeholder="email address" class="email1"><br>
                </div>
                <input type="number" placeholder="phone number" class="phone">
                <input type="text" placeholder="Address" class="address"><br>

                <input type="password" placeholder="password" class="password1"><br>
            </div>
            <p style="margin-top: -7px;color: rgb(9, 9, 9);opacity: 0.7;width: 100%;text-align: center;display: none;font-size: 15px;justify-content: center;align-items: center;margin-bottom: 15px;" class="err2">Username already exists</p>

            <button onclick="checkSignup()">Create a new account account</button>
        </div>
    </div>

    <div class="container">
        <div class="message" >

            <div class="wrap-chats">
                <div class="top-msg">
    
                    <div class="profile-chat">
                        <!-- <img src="{{gig.avatar}}" alt=""> -->
                        <div>
                            <h3><ion-icon name="chatbubble-ellipses" style="color: #07a44b;margin-right: 10px;"></ion-icon> Messages</h3>
                            <!-- <p>Avg. response time : {{gig.response_time}}hr</p> -->
                        </div>
                    </div>
                    <h5 onclick="closeMsg()"><i class="fa-solid fa-xmark"></i></h5>
                </div>
    
                <div class="chats">
                    {% for chat in chats %}
                    <div class="chat" onclick="showMessages(this)">
                        <input type="hidden" value="{{request.user.username}}" class="from_user1">
                        <input type="hidden" class="to_user1" value="{{chat.username}}">
                        <img src="{{chat.image}}" alt="">
                        <div class="chat-details">
                            <h3 >{{chat.username}}</h3>
                            <p>click to view message</p>
                        </div>
                        <h5>10:25Pm</h5>
                    </div>
                    {% endfor %}
    
             
    
                </div>
            </div>
            <input type="hidden" class="global_to" value="">
            <input type="hidden" class="global_from" value="{{request.user.username}}">
    
            <div class="wrap-msg" style="position: relative;height: 100%;display: none;">
                <div class="top-msg">
                    <div class="profile-chat">
                        <h4 style="width: 25px;height: 25px;border-radius: 8px;background-color: #07a44b;color: white;display: flex;justify-content: center;align-items: center;" onclick="back()"><ion-icon name="arrow-back-outline"></ion-icon></h4>
                        <img src="{% static 'images/09 (1).jpg' %}" alt="" class="chat-pic">
                        <div>
                            <h3 class="cht-username">ads</h3>
                            <p class="avg">Avg. response time : 2hr</p>
                        </div>
                    </div>
                    <h5 onclick="closeMsg()"><i class="fa-solid fa-xmark"></i></h5>
                </div>
    
                <div class="messages">
                    
                
      
    
                </div>
    
                <input type="hidden" value = "1" class = "to_user">
                <input type="hidden" value = "{{request.user.username}}" class = "from_user">
    
                <div class="msg-options">
                    <input type="text" placeholder="Type your message here" class="text-msg">
                    <button onclick="sendMsg()" style="cursor: pointer;"><ion-icon name="send" ></ion-icon></button>
                </div>
    
        </div>
    
        </div>
        {% if request.user.is_authenticated %}
        <!-- <button onclick="showMsg()" style="transition: 0.3s;cursor: pointer;" class="message-button pulse"><ion-icon name="chatbox-ellipses"></ion-icon></button> -->
        {% endif %}
        <div class="navbar" style="position: fixed;top: 0;width: 100%;z-index: 150;background-color: white;">
            <div class="navbar1">
                <div style="width: 1200px;display: flex;justify-content: space-between;align-items: center;padding-left: 45px;">

                    <h1>Welcome {{request.user.username}} to medicate!</h1>
                    <div class="login-details">
                        {% if not request.user.is_authenticated %}
                        <div class="login" onclick="showLogin()" style="cursor: pointer;">
                            <h6><ion-icon name="log-in"></ion-icon></h6>
                            <h5>Login</h5>
                        </div>
                        <div class="login" onclick="showSignup()" style="cursor: pointer;margin-left: 35px;">
                            <h6><ion-icon name="person-add"></ion-icon></h6>
                            <h5>Signup</h5>
                        </div>
                        <div class="login" onclick="showSignupShopkeeper()" style="cursor: pointer;margin-left: 35px;">
                            <h6><ion-icon name="business"></ion-icon></h6>
                            <h5>Shopkeeper Signup</h5>
                        </div>
                        <div class="login" onclick="showSignupHospital()" style="cursor: pointer;margin-left: 35px;">
                            <h6><ion-icon name="medical"></ion-icon></h6>
                            <h5>Hospital Signup</h5>
                        </div>
                    {% else %}
                    {% if profile.is_shopkeeper %}
                    <div class="login" style="cursor: pointer;" onclick="showUpload()">
                        <img src="{% static 'images/en.jpg' %}" alt="">
                        <h5><ion-icon name="add-outline"></ion-icon> Add Product</h5>
                    </div>
                    {% endif %}
                    {% if profile.is_hospital %}
                    <div class="login" onclick="showSignupDoctor()" style="cursor: pointer;margin-left: 35px;">
                        <h6><ion-icon name="medical"></ion-icon></h6>
                        <h5>Add Doctor</h5>
                    </div>
                    {% endif %}
                    <a class="login"  style="cursor: pointer;text-decoration: none;color: black;position: relative;cursor: default;border: 2px solid rgb(255, 255, 255);padding: 5px 15px 5px 15px;border-radius: 100px;background-color: #07a44b;color: white;gap: 5px;" >
                        <h6 style="font-weight: 600;color: white;">₹</h6>
                        <h5 style="color: white;">{{profile.balance}}</h5>
                        
                    </a>
                    <a class="login"  style="cursor: pointer;text-decoration: none;color: black;position: relative;" onclick="showNotifications()">
                        <h6><ion-icon name="notifications"></ion-icon></h6>
                        <h5>Notifications</h5>
                        
                    </a>
                    <div class="notifications" style="position: absolute;top: 40px;width: 450px;background-color: white;padding: 10px;display: none;right: 340px;flex-direction: column;z-index: 1000;" >
                        <h4 style="position: absolute;top: 0;right: 0;background-color: rgb(52, 52, 52);color: white;width: 25px;height: 25px;cursor: pointer;display: flex;justify-content: center;align-items: center;z-index: 1990;background-color: rgb(180, 38, 38);pointer-events: all;" onclick="closeNotifications()"><i class="fa-solid fa-xmark"></i></h4>
                        <h3 style="font-size: 19px;font-weight: 600;text-align: left;width: fit-content;display: flex;justify-content: center;align-items: center;gap: 15px;"><ion-icon name="notifications" style="color: #07a44b;"></ion-icon> Notifications For You</h3>
                        <br>
                        <p style="font-size: 13px;opacity: 0.7;margin-top: -15px;position: relative;">Below are the list of notifications you have</p>
                        {% for notification in notifications %}
                        <a style="display: flex;gap: 8px;justify-content: center;align-items: flex-start;margin-top: 25px;cursor:pointer;text-decoration: none;color: black;">

                            <img src="{% static 'images/09 (1).jpg' %}" alt="" style="width: 50px;height: 50px;border-radius: 100px;object-fit: cover;margin-left: 15px;margin-right: 15px;">
                            <p style="font-weight: 600;font-size: 14px;line-height: 25px;">{{notification.message}}</p>
                        </a>
                        
                        {% endfor %}
                        <!-- <button onclick="closeNotifications()">close</button> -->
                    </div>
                    <a class="login"  style="cursor: pointer;text-decoration: none;color: black;margin-left: 25px;" href="{% url 'logout' %}">
                        <h6><ion-icon name="log-out"></ion-icon></h6>
                        <h5>Logout</h5>
                    </a>
                    {% endif %}
                    
                    <div class="login" style="opacity: 0;user-select: none;">
                        <h5>USD</h5>
                    </div>
                </div>
            </div>
            </div>
            <div class="navbar2">
                <div style="display: flex;justify-content: center;align-items: center;gap: 25px;">

                    <img src="{% static 'images/logo-default.png' %}" alt="" style="width: 120px;">
                    <div class="links">
                        <a href="{% url 'homepage' %}">Home</a>
                        {% if request.user.is_authenticated %}
                        <a href="{% url 'shop' %}">Shop</a>
                        {% else %}
                        <a onclick="showLogin()" style="cursor: pointer;">Shop</a>
                        
                        {% endif %}
                        {% if not profile.is_shopkeeper and not profile.is_hospital and not profile.is_doctor %}
                        {% if request.user.is_authenticated %}
                        <a href="{% url 'music' %}" style="cursor: pointer;">Music</a>
                        {% else %}
                        <a onclick="showLogin()" style="cursor: pointer;">Music</a>
                        {% endif %}
                        {% if request.user.is_authenticated %}
                        <a href="{% url 'meditation' %}" style="cursor: pointer;">Meditation</a>
                        {% else %}
                        <a onclick="showLogin()" style="cursor: pointer;">Meditation</a>
                        {% endif %}
                        {% if request.user.is_authenticated %}
                        <a href="{% url 'depression' %}" style="">Depression Check</a>
                        {% endif %}
                        <a href="" style="opacity: 0;pointer-events: none;">Pagess</a>
                        <a href="" style="opacity: 0;pointer-events: none;">Pa</a>
                        {% endif %}
                    </div>
                </div>
                
                {% if request.user.is_authenticated and not profile.is_shopkeeper %}
                <div class="like">
                    <!-- <h5 style="font-size: 14px;"><ion-icon name="heart-outline"></ion-icon></h5> -->
                    <!-- <h5 style="font-size: 14px;"></h5> -->

                    <a href="{% url 'cart' %}" style="text-decoration: none;color: black;font-weight: 600;"><h3 style="display: flex;justify-content: center;align-items: center;gap: 15px;"><ion-icon name="cart-outline"></ion-icon> My Cart</h3></a>
                    <a href="{% url 'orders' %}" style="text-decoration: none;color: black;font-weight: 600;"><h3 style="display: flex;justify-content: center;align-items: center;gap: 15px;margin-left: 25px;"><ion-icon name="wallet-outline"></ion-icon> My orders</h3></a>
                </div>
                {% else %}
                <div class="like" style="opacity: 0;display: none;">
                    <!-- <h5 style="font-size: 14px;"><ion-icon name="heart-outline"></ion-icon></h5> -->
                    <!-- <h5 style="font-size: 14px;"></h5> -->
                    <a onclick="showLogin()" style="text-decoration: none;color: black;font-weight: 600;cursor: pointer;"><h3 style="display: flex;justify-content: center;align-items: center;gap: 15px;"><ion-icon name="cart-outline"></ion-icon> My Cart</h3></a>
                    <a onclick="showLogin()" style="text-decoration: none;color: black;font-weight: 600;cursor: pointer;"><h3 style="display: flex;justify-content: center;align-items: center;gap: 15px;margin-left: 25px;"><ion-icon name="wallet-outline"></ion-icon> My orders</h3></a>
                </div>
                {% endif %}
                {% if request.user.is_authenticated and profile.is_shopkeeper %}
                <div class="like">
                    <!-- <h5 style="font-size: 14px;"><ion-icon name="heart-outline"></ion-icon></h5> -->
                    <!-- <h5 style="font-size: 14px;"></h5> -->
                    <a href="{% url 'orders' %}" style="text-decoration: none;color: black;font-weight: 600;"><h3 style="display: flex;justify-content: center;align-items: center;gap: 15px;margin-left: 25px;margin-right: 25px;"><ion-icon name="wallet-outline"></ion-icon> All orders</h3></a>

                    <!-- <a href="{% url 'notifications' %}" style="text-decoration: none;color: black;font-weight: 600;"><h3 style="display: flex;justify-content: center;align-items: center;gap: 15px;"><ion-icon name="notifications-outline"></ion-icon> Notifications</h3></a> -->
                    

                </div>
                {% endif %}
            </div>
            
        </div>
        <!-- <div class="banner" style="margin-top: 180px;">
            <div class="image-banner">
                <img src="{% static 'images/slider2-111.jpg' %}" alt="">
                <div class="banner-details">
                    <h5>GET THE COMPLETE</h5>
                    <h1>Aquim Hand Sanitizer</h1>
                    <p>Kill 99.99% of germs fast</p>
                    
                </div>
            </div>
            <div class="img-group">
                <img src="{% static 'images/banner-2-11.jpg' %}" alt="">
                <img src="{% static 'images/banner-2-12.jpg' %}" alt="">
            </div>

        </div> -->
        {% if not profile.is_hospital %}
        <div class="banner-wrap" style="display: flex;justify-content: center;align-items: center;position: relative;margin-top: -29px;">
            <div class="text" style="position: absolute;text-align: center;z-index: 10;top: 100px;">
                <h2 style="width: 600px;">Inspiring <span style="color: #3dd6ba;">Better Health </span>Care For Everyone</h2>
                <p>Nurturing Minds and Inspiring Transformation.</p>
                <!-- <button>Show All Products</button> -->
                <h1 class="arrow"><ion-icon name="arrow-down"></ion-icon></h1>
            </div>
            <!-- <video style="height: 400px;width: 100%;object-fit: cover;filter: brightness(0.7);" autoplay muted loop>
                <source src="{% static 'images/pexels-taryn-elliott-5271828-1920x1080-25fps.mp4' %}"></source>
            </video> -->
            <img src="{% static 'images/pexels-download-a-pic-donate-a-buck-^-48566.jpg' %}" alt="" style="width: 100%;height:55vh;object-fit: cover;margin-top: 100px;filter: brightness(0.7);">
        </div>
        {% else %}
        <div class="banner-wrap" style="display: flex;justify-content: center;align-items: center;position: relative;margin-top: -29px;">
            <div class="text" style="position: absolute;text-align: center;z-index: 10;top: 100px;">
                <h2 style="width: 600px;">Inspiring <span style="color: #3dd6ba;">Better Health </span>Care For Everyone</h2>
                <p>Healing Horizons: Inside the World of Hospital Care</p>
                <!-- <button>Show All Products</button> -->
                <h1 class="arrow"><ion-icon name="arrow-down"></ion-icon></h1>
            </div>
            <!-- <video style="height: 400px;width: 100%;object-fit: cover;filter: brightness(0.7);" autoplay muted loop>
                <source src="{% static 'images/pexels-taryn-elliott-5271828-1920x1080-25fps.mp4' %}"></source>
            </video> -->
            <img src="{% static 'images/colorful-collection-pills-healthcare-generated-by-ai.jpg' %}" alt="" style="width: 100%;height:55vh;object-fit: cover;margin-top: 100px;filter: brightness(0.7);">
        </div>
        {% endif %}
        <!-- <div class="banner-bottom">
            <div class="details">
                <h5>MUST HAVE</h5>
                <h3>Best Selling Products</h3>
            </div>
            <img src="Blood-Pressure-and-Sprague-Stethoscope-Kit.jpg" alt="">
            <img src="Honey-Tulsi-300g.jpg" alt="">
            <img src="Milk-Powder-900g (1).jpg" alt="">
            <img src="Pack-of-50-Disposable-Face-Masks.jpg" alt="">
            <img src="UX-A-01-Non-Contact-Infrared-Thermometer.jpg" alt="">
            <img src="Vitamin-C-with-Zinc-30-Tablets.jpg" alt="">
        </div> -->
        <!-- <div class="first-section">
            <div class="section1">
                <img class="img1" src="banner-2-13.jpg" alt="">
                <img class="img2" src="banner-2-14.jpg" alt="">
                <img class="img3" src="banner-2-15.jpg" alt="">
            </div>
        </div> -->
        <!-- <img src="{% static 'images/test.png' %}" alt="" style="width: 100%;object-fit: contain;"> -->
        <div class="features">
            <div class="feature">
                <h1 style="color: #4298b4;">400K+</h1>
                <h4>Tests Today</h4>
            </div>
            <div class="feature">
                <h1 style="color: #e4ae3a;">100K+</h1>
                <h4>Total Users</h4>
            </div>
            <div class="feature">
                <h1 style="color: #33a474;">700K+</h1>
                <h4>Tests Total</h4>
            </div>
            <div class="feature">
                <h1 style="color: #88619a;">500K+</h1>
                <h4>Total Music</h4>
            </div>
        </div>
        {% if not profile.is_hospital %}
        <div class="section2 what">
            
            <h1 style="width: 550px;text-align: center;margin-top: 25px;text-transform: uppercase;">Who <span style="color: #3dd6ba;">We </span>Are?​</h1>
            <p style="width: 400px;text-align: center;margin-top: -25px;font-weight: 500;opacity: 0.6;">Empowering Healing, Support, and Stigma Shattering Together.</p>
            <p style="margin-top: -25px;font-weight: 600;color: #138f82;">WHAT WE DO</p>
            <div class="site-features">
                <div class="feat">

                    <img src="{% static 'images/pic_1.png' %}" alt="">
                    <h3>Sounds Of Healing</h3>
                    <p>Music Healing</p>
                    <a href="{% url 'music' %}" style="text-decoration: none;"><button>View Music <ion-icon name="arrow-forward-circle"></ion-icon></button></a>
                </div>
                <div class="feat">

                    <img src="{% static 'images/pic3.png' %}" alt="">
                    <h3>Depression Prediction</h3>
                    <p>Are u Depressed?</p>
                    <a href="{% url 'depression' %}" style="text-decoration: none;"><button>Depression<ion-icon name="arrow-forward-circle"></ion-icon></button></a>
                </div>
                <div class="feat">

                    <img src="{% static 'images/watch.png' %}" alt="">
                    <h3>Depression Awareness</h3>
                    <p>View Blogs</p>
                    <a href="{% url 'blogs' %}" style="text-decoration: none;"><button>View Awareness <ion-icon name="arrow-forward-circle"></ion-icon></button></a>
                </div>
                <div class="feat">

                    <img src="{% static 'images/reading.png' %}" alt="">
                    <h3>Focus Boosting</h3>
                    <p>Meditate Now</p>
                    <a href="{% url 'meditation' %}" style="text-decoration: none;"><button>View Video <ion-icon name="arrow-forward-circle"></ion-icon></button></a>
                </div>
            </div>
        </div>
        <center>

            <!-- <p style="width: 800px;line-height: 30px;text-align: center;">Communicating the idea that by empowering individuals with knowledge, resources, and support, their lives can be transformed positively despite depression.</p> -->
        </center>
        <div class="section2">
            <h1 style="margin-top: 25px;text-transform: uppercase;">SHop <span style="color: #33a474;">Products</span></h1>
            <p style="margin-top: -25px;">Browse the products you want</p>
            {% if not profile.is_shopkeeper %}
            <div class="second-section" style="flex-wrap: wrap;">
                {% for product in products %}
                <!-- {% if request.user.is_authenticated %}
                <a class="cards" href="{% url 'track' pk=product.pk %}" style="text-decoration: none;color: black;">
                {% else %}
                <a class="cards" style="text-decoration: none;color: black;" onclick="showLogin()">

                {% endif %}
                    <img src="{{product.image.url}}" alt="">
                    <div class="card-details">
                        <h4>{{product.user.username}}</h4>
                        <h2>{{product.name}} <br>{{product.dosage}} Mg</h2>
                        <h3 style="color: rgb(14, 14, 14);font-weight: 600;">₹{{product.price}}</h3>
                        
                    </div>
                </a> -->
                <div class="product">
                    <img src="{{product.image.url}}" alt="" style="height: 190px;object-fit: contain;">
                    <h2>{{product.name}}</h2>
                    <h3 style="color: rgb(255, 255, 255);font-weight: 600;">₹{{product.price}}</h3>
                    <p>Shopkeeper1</p>
                    <div class="options">
                        
                        <!-- <h4><ion-icon name="heart-outline"></ion-icon></h4> -->
                        {% if not product.cart %}
                        <h4 onclick="addToCart('{{product.pk}}',this)" class="cart"><ion-icon name="cart-outline"></ion-icon> Add To Cart</h4>
                        {% else %}
                        <h4 class="cart"><ion-icon name="cart"></ion-icon> Added</h4>
                        {% endif %}

                        {% if request.user.is_authenticated %}
                        <a href="{% url 'track' pk=product.pk %}" style="text-decoration: none;color: black;transform: scale(1);"><h4 class="view-btn" style="transform: scale(1);"><ion-icon name="eye"></ion-icon> View</h4> </a>
                        {% else %}
                        <a onclick="showLogin()" style="text-decoration: none;color: black;transform: scale(1);"><h4 h4 class="view-btn"><ion-icon name="eye"></ion-icon> View</h4></a>

                        {% endif %}
                        <!-- <h4><ion-icon name="cart"></ion-icon></h4> -->
                        <!-- {% if request.user.is_authenticated %}
                        <h4 onclick="share('http://localhost:8000/track/{{product.pk}}')"><ion-icon name="share-social"></ion-icon></h4>
                        {% else %}
                        <h4><ion-icon name="share-social"></ion-icon></h4>

                        {% endif %} -->
                    </div>

                </div>
                {% endfor %}
                
                
            </div>
            {% else %}
            <div class="second-section" style="flex-wrap: wrap;">
                {% for product in products_shop %}
                <div class="product">
                    <img src="{{product.image.url}}" alt="" style="height: 190px;object-fit: contain;">
                    <h2>{{product.name}}</h2>
                    <h3 style="color: rgb(14, 14, 14);font-weight: 600;">₹{{product.price}}</h3>
                    <div class="options">
                        <a href="{% url 'track' pk=product.pk %}" style="text-decoration: none;color: black;"><h4 style="display: flex;justify-content: center;align-items: center;font-weight: 500;font-size: 16px;gap: 10px;"><ion-icon name="eye"></ion-icon> View Product</h4></a>
                        <!-- <h4 style="font-size: 15px;font-weight: 600;display: flex;justify-content: center;align-items: center;gap: ;">{{product.stock}} <ion-icon name="bar-chart-outline"></ion-icon></h4> -->
                        <!-- {% if not product.cart %}
                        <h4 onclick="addToCart('{{product.pk}}',this)"><ion-icon name="cart-outline"></ion-icon></h4>
                        {% else %}
                        <h4><ion-icon name="cart"></ion-icon></h4>
                        {% endif %} -->
                        <!-- <h4><ion-icon name="cart"></ion-icon></h4> -->
                        <!-- <h4><ion-icon name="share-social"></ion-icon></h4> -->
                    </div>

                </div>
               

                {% endfor %}
                
                
            </div>
            {%  endif %}
        </div>   
        <center><a href="{% url 'shop' %}"><button class="view-all">View all products </button></center></a>
        <div class="section2">
            <h1 style="margin-top: 25px;">Feedback</h1>
            <p style="margin-top: -25px;">Valuable Insight from Our Customers!</p>
            
        </div>   
        {% if request.user.is_authenticated %}
        <center>

            <form action="{% url 'comment' %}" method="post" style="margin-bottom: 35px;display: flex;justify-content: center;align-items: center;gap: 15px;padding: 12px;border-radius: 10px;width: 600px;margin-top: 25px;border: 2px solid rgb(255, 255, 255);" class="feedForm">
                {% csrf_token %}
                <h3 style="position: absolute;left: 20px;opacity: 1;color: #07a44b;"><ion-icon name="chatbubble-ellipses"></ion-icon></h3>
                <input type="text" required placeholder="Write comment" name="comment" style="width: 85%;padding: 10px 10px 10px 45px;border:none;border-top: transparent;border-left: transparent;border-right: transparent;position: relative;z-index: 10;background-color: transparent;outline: none;font-weight: 600;">
                <button style="background-color: #259757;color: white;width: 100px;border-radius: 5px;font-weight: 600;padding: 10px;border: none;outline: none;position: relative;z-index: 10;cursor: pointer;">Post <ion-icon name="arrow-redo"></ion-icon></button>
            </form>
        </center>
        {% endif %}
        <center>

       
        <div class="comments" style="width: 800px;position: relative;margin-bottom: 55px;margin-top: 35px;">
            {% for comment in comments %}
            <div class="comment" style="display: flex;gap: 25px;padding-left: 25px;padding-right: 25px;margin-bottom: 55px;width: 100%;">
                <img src="{{comment.image}}" alt="" style="width: 40px;height: 40px;border-radius: 100px;object-fit: cover;">
                <div style="display: flex;justify-content: center;align-items: flex-start;flex-direction: column;">
                    <h5 style="text-align: left;font-size: 16px;font-weight: 600;margin-bottom: 8px;background-color: #07a44b;color: white;padding: 5px 15px 5px 15px;width: fit-content;border-radius: 100px;font-size: 13px;">{{comment.user.username}}</h5>
                    <p style="margin-left: 0;padding: 0;font-weight: 600;font-size: 15px;">{{comment.comment}}</p>
                    {% if comment.reply != "" %}
                    <h3 style="font-weight: 600;font-size: 14px;margin-top: 15px;color: #88619a;display: flex;justify-content: center;align-items: center;cursor: pointer;gap: 8px;" onclick="showReply(this,this.parentNode)">View Reply <ion-icon name="caret-down"></ion-icon></h3>
                    <div class="comment reply" style="display: none;gap: 25px;margin-left: -65px;padding-right: 0px;margin-top: 45px;position: relative;">
                        <img src="{% static 'images/arrow.png' %}" alt="" style="z-index: 10;width: 200px;height: 40px;object-fit: cover;position: absolute;width: 80px;top: -45px;left: 0px;opacity: 0.2;">
                        <img src="{% static 'images/09 (1).jpg' %}" alt="" style="width: 40px;height: 40px;border-radius: 100px;object-fit: cover;">
                        
                        <div style="display: flex;justify-content: center;align-items: flex-start;flex-direction: column;">
                            <h5 style="text-align: left;font-size: 16px;font-weight: 600;margin-bottom: 5px;background-color: #eeeeee;color: rgb(37, 37, 37);padding: 5px 15px 5px 15px;width: fit-content;border-radius: 100px;font-size: 13px;">Admin</h5>
                            <p style="margin-left: 0;padding: 0;font-weight: 600;font-size: 15px;">{{comment.reply}}</p>
                            
                            <!-- <p style="margin-left: 15px;padding: 0;font-weight: 600;opacity: 0.7;margin-top: 15;">Admin: Yeah its is</p> -->
                        </div>
                    </div>
                    {% endif %}
                </div>
                <p style="padding: 0;font-weight: 600;opacity: 0.7;margin-top: 15;position: absolute;right: 10px;font-size: 14px;padding: 5px 15px 5px 15px;background-color: #ebebeb;border-radius: 100px;">{{comment.date}}</p>
                
            </div>
             {% endfor %}
        </div>
        </center>
        {% else %}
        <div class="section2 what">
            
            <h1 style="width: 550px;text-align: center;margin-top: 25px;text-transform: uppercase;">Manage <span style="color: #3dd6ba;">Doctors </span>​</h1>
            <p style="width: 400px;text-align: center;margin-top: -25px;font-weight: 500;opacity: 0.6;">Harmony in the White Coats: Mastering the Art of Doctor Administration</p>
            <p style="margin-top: -25px;font-weight: 600;color: #138f82;">ALL DOCTORS</p>
            <!-- <div class="site-features">
                <div class="feat">

                    <img src="{% static 'images/09 (1).jpg.png' %}" alt="">
                    <h3>Sounds Of Healing</h3>
                    <p>Music Healing</p>
                    <button>View Music <ion-icon name="arrow-forward-circle"></ion-icon></button>
                </div>
                <div class="feat">

                    <img src="{% static 'images/pic3.png' %}" alt="">
                    <h3>Depression Prediction</h3>
                    <p>Are u Depressed?</p>
                    <button>Depression<ion-icon name="arrow-forward-circle"></ion-icon></button>
                </div>
                <div class="feat">

                    <img src="{% static 'images/watch.png' %}" alt="">
                    <h3>Depression Awareness</h3>
                    <p>View Blogs</p>
                    <button>View Awareness <ion-icon name="arrow-forward-circle"></ion-icon></button>
                </div>
                <div class="feat">

                    <img src="{% static 'images/reading.png' %}" alt="">
                    <h3>Focus Boosting</h3>
                    <p>Meditate Now</p>
                    <button>View Music <ion-icon name="arrow-forward-circle"></ion-icon></button>
                </div>
            </div> -->
            <div class="users">
                <div class="user">
                    <img src="{% static 'images/young-handsome-physician-medical-robe-with-stethoscope.jpg' %}" alt="">
                    <h3>Anil kumar</h3>
                    <h4>Psycatrist</h4>
                    <p>Ottapalam, Kanniyampuram Near Seventh day hospital</p>
                    <div class="more-details">
                       <h2><ion-icon name="mail"></ion-icon></h2>
                       <h2><ion-icon name="call"></ion-icon></h2>
                    </div>

                    <div class="book">
                        <h5>6:30PM</h5>
                        <h5>6:50PM</h5>
                        <h5>7:00PM</h5>
                        <h5>7:20PM</h5>
                    </div>
                    <button>Book Now</button>

                </div>
            </div>
        </div>
        {% endif %}
        <!-- <div class="section3" style="margin-bottom: 50px;position: relative;">
            <div class="third-section">
                <img src="{% static 'images/banner-2-16.jpg' %}" alt="">
                <img src="{% static 'images/banner-2-17.jpg' %}" alt="">
            </div>    
        </div>   -->
        <center>
            <div style="background-color: rgb(30, 30, 30);padding-top: 20px;padding-bottom: 20px;position: relative;" class="about">
                <!-- <img src="{% static 'images/pattern.png' %}" alt="" style="width: 100%;height: 100%;object-fit: cover;position: absolute !important; top: 0;left: 0;opacity: 0.15;"> -->
                <h2 style="color: rgb(255, 255, 255);font-weight: 600;">About US</h2>
                <p style="width: 650px;text-align: center;color: #5d5d5d;line-height: 30px;margin-top: 25px;font-weight: 600;">Lorem ipsum dolor sit amet consectetur adipisicing elit. Et fugit, numquam delectus aperiam quam necessitatibus voluptatum accusamus impedit? Autem tempora sequi earum molestias consequatur! Vitae natus praesentium at perferendis nulla?</p>
            </div>
            
        </center>


        <footer style="background-color: rgb(30, 30, 30);width: 100%;height: 60px;color: white;display: flex;justify-content: center;align-items: center;gap: 45px;" class="foot">
            <!-- <h3>Follow us on</h3> -->
            <h4><ion-icon name="logo-facebook"></ion-icon></h4>
            <h4><ion-icon name="logo-twitter"></ion-icon></h4>
            <h4><ion-icon name="logo-instagram"></ion-icon></h4>
        </footer>
        
       
    </div>         
    <script src="{% static 'js/index.js' %}"></script>
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script> 
<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

<script>
    function sendData(){
        
        var data = new FormData()
  
        data.append("username", document.querySelector('.userName').value)
        data.append("password", document.querySelector('.password').value)
  
        
  
        data.append("csrfmiddlewaretoken",'{{ csrf_token }}')
        
        $.ajax({
  
            method:"POST",
            url:'/checkLogin/',
            processData:false,
            contentType:false,
            // MimeType:"multipart/form-data",
            data:data,
            success:function(res){
                localStorage.setItem("message",res.message)
  
                if(res.message === 0){
                    
                    login(data)
                    localStorage.setItem("username",document.querySelector('.userName').value)
                    localStorage.setItem('password',document.querySelector('.password').value)
                    // location.reload();
                    
                }
                else{
                    document.querySelector('.error').style.display = "flex"
                    
                }
                
  
            }
        })
    }
  
    function login(data){
  
  
        $.ajax({
  
            method:"POST",
            url:'/login/',
            processData:false,
            contentType:false,
            MimeType:"multipart/form-data",
            data:data,
            success:function(res){
                console.log("it worked :)")
                
                setTimeout(()=>{
  
                    location.reload();
                },1000)
            }
            })
    }
  
    function signup(data){
        console.log("888888888");
        $.ajax({
  
            method:"POST",
            url:'/register/',
            processData:false,
            contentType:false,
            MimeType:"multipart/form-data",
            data:data,
            success:function(res){
                
                setTimeout(()=>{
  
                    location.reload();
  
                },1000)
            }
            })
  
    }
  
    function checkSignup(){
        var data = new FormData()
  
        data.append("username", document.querySelector('.username1').value)
        data.append("email", document.querySelector('.email1').value)
        data.append("password", document.querySelector('.password1').value)
        data.append("phone", document.querySelector('.phone').value)
        data.append("address", document.querySelector('.address').value)
        data.append("csrfmiddlewaretoken",'{{ csrf_token }}')
  
        
        $.ajax({
  
            method:"POST",
            url:'/checkSignup/',
            processData:false,
            contentType:false,
            // MimeType:"multipart/form-data",
            data:data,
            success:function(res){
                // localStorage.setItem("message",res.message)
  
                if(res.message === 0){
                    
  
                        // alert("Valid email address!");
                        
                        var validRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
  
                        if (document.querySelector('.email1').value.match(validRegex)) {
                            document.querySelector('.err2').style.display = "none"
                            // alert("Valid email address!");
                            error = 0
                            console.log("");
  
                        } else {
  
                            alert("Invalid email address!");
                            error = 1
                            
  
                        }
  
                        if (document.querySelector('.username1').value == "") {
  
  // alert("Valid email address!");
                        error = 1
                        alert("please enter a valid username!");
                        document.querySelector('.err2').style.display = "none"
  
  
                        } else {
  
                            console.log("");
                            error = 0
  
                        }
  
                        if (document.querySelector('.phone').value == "") {
  
  // alert("Valid email address!");
                        error = 1
                        alert("please enter phone number!");
                        document.querySelector('.err2').style.display = "none"
  
  
                        } else {
  
                            console.log("");
                            error = 0
  
                        }
  
                        if (document.querySelector('.address').value == "") {
  
  // alert("Valid email address!");
                        error = 1
                        alert("please enter your address!");
                        document.querySelector('.err2').style.display = "none"
  
  
                        } else {
  
                            console.log("");
                            error = 0
  
                        }
  
                        if (document.querySelector('.password1').value == "" ) {
  
                            alert("please fill the password!");
                            document.querySelector('.err2').style.display = "none"
                            error = 1
                            } 
                            
                            else if(document.querySelector('.password1').value.length < 7){
  
                            alert("password length must be greater than 7");
                            document.querySelector('.err2').style.display = "none"
                            error = 1
  
  
                            }
  
                            else{
                                error = 0
                                
                            }
  
                            
                        
  
                    
                    
                    // localStorage.setItem("username",document.querySelector('.username').value)
                    // localStorage.setItem('password',document.querySelector('.password').value)
                    // location.reload();
                    
                }
                else{
                    
  
                    document.querySelector('.err2').style.display = "flex"
  
                }
  
                if(error == 0){
                                signup(data)
                            }
                
  
            }
        })
    }
  
    
  
    function back(){
        history.back()
    }

    function addToCart(){
      
      var data = new FormData()

      data.append("pk", document.querySelector('.pk').value)
      data.append("quantity",document.querySelector('.quantity').value)

      

      data.append("csrfmiddlewaretoken",'{{ csrf_token }}')
      
      $.ajax({

          method:"POST",
          url:'/addToCart/',
          processData:false,
          contentType:false,
          // MimeType:"multipart/form-data",
          data:data,
          success:function(res){
              
            if (res.out == 1 ) {

            document.querySelector('.out').style.display = "flex"
            document.querySelector('.payment').style.display = "none"

            }
            else{
            document.querySelector('.out').style.display = "none"
            document.querySelector('.cart').innerHTML ='<ion-icon name="cart-outline"></ion-icon> Added To Cart'
            document.querySelector('.cart').style.pointerEvents = "none"
            }

          }
      })
  }


  function buyNow(element){
      
      
      var data = new FormData()
      document.querySelector('.out').style.display = "none"
    //   data.append("pk", document.querySelector('.pk').value)
    //   data.append("quantity",document.querySelector('.quantity').value)
      data.append("csrfmiddlewaretoken",'{{ csrf_token }}')
    //   data.append("price",document.querySelector('.total').value)
      var upiRegex = /^[\w.-]+@[\w.-]+$/;
      var upi = document.querySelector('.upi').value 
      var ures = upiRegex.test(upi);
      console.log(ures);
        if(ures == true){
      $.ajax({

          method:"POST",
          url:'/buyAll/',
          processData:false,
          contentType:false,
          // MimeType:"multipart/form-data",
          data:data,
          success:function(res){
            if(res.success == "1"){

                setTimeout(()=>{
                    alert("Successfully Placed Order")
                },2000)
                
                setTimeout(()=>{
                    alert("Order shipped successfully")
                },9000)
                
                setTimeout(()=>{
                    alert("Order out for delivery")
                },18000)

                
                setTimeout(()=>{
                    alert("Order delivered successfully")
                },25000)
                element.innerHTML = '<ion-icon name="wallet-outline"></ion-icon> Order Placed'
            }
            else{
                if(res.out == 0){

                    document.querySelector('.balance').style.display = "flex"
                }
            }

            if (res.out == 1 ) {

                document.querySelector('.out').style.display = "flex"

            }
            else{
                document.querySelector('.out').style.display = "none"
            }

          }
      })}
      else{
        alert("Invalid upi id")
      }
    
  }

  function buyNowAddress(element){
      
      var data = new FormData()

    //   data.append("pk", document.querySelector('.pk').value)
    //   data.append("quantity",document.querySelector('.quantity').value)
      data.append("csrfmiddlewaretoken",'{{ csrf_token }}')
    //   data.append("price",document.querySelector('.total').value)
      
      
        if(document.querySelector('.add').value != "" && document.querySelector('.pin').value != ""){
      $.ajax({

          method:"POST",
          url:'/buyAllAdd/',
          processData:false,
          contentType:false,
          // MimeType:"multipart/form-data",
          data:data,
          success:function(res){
            if(res.success == "1"){

                
                element.innerHTML = '<ion-icon name="wallet-outline"></ion-icon> Order Placed'
                setTimeout(()=>{
                    alert("Successfully Placed Order")
                },2000)
                
                setTimeout(()=>{
                    alert("Order shipped successfully")
                },9000)
                
                setTimeout(()=>{
                    alert("Order out for delivery")
                },18000)

                
                setTimeout(()=>{
                    alert("Order delivered successfully")
                },25000)
            }
            else{
                if(res.out == 0){

                    document.querySelector('.balance').style.display = "flex"
                }
            }

            if (res.out == 1 ) {

                document.querySelector('.out').style.display = "flex"

            }
            else{
                document.querySelector('.out').style.display = "none"
            }

          }
      })}
      else{
        alert("Please fill the fields")
      }
  }

  function validateAccountNumber(accountNumber) {
  // Account number pattern: 8 to 12 digits
  var accountRegex = /^\d{8,12}$/;

  return accountRegex.test(accountNumber);
}

function validateCVV(cvvNumber) {
  // CVV number pattern: 3 digits
  var cvvRegex = /^\d{3}$/;

  return cvvRegex.test(cvvNumber);
}
  function buyNowDebit(element){
      
      var data = new FormData()

    //   data.append("pk", document.querySelector('.pk').value)
    //   data.append("quantity",document.querySelector('.quantity').value)
      data.append("csrfmiddlewaretoken",'{{ csrf_token }}')
    //   data.append("price",document.querySelector('.total').value)
      
      
        if(validateAccountNumber(document.querySelector('.acc').value) && validateCVV(document.querySelector('.ccv').value)){
      $.ajax({

          method:"POST",
          url:'/buyAll/',
          processData:false,
          contentType:false,
          // MimeType:"multipart/form-data",
          data:data,
          success:function(res){
            if(res.success == "1"){
                setTimeout(()=>{
                    alert("Order placed successfully ✅")
                },2000)
                
                setTimeout(()=>{
                    alert("Successfully shipped order 🚢")
                },9000)
                
                setTimeout(()=>{
                    alert("Order out for delivery 📦")
                },18000)

                
                setTimeout(()=>{
                    alert("Order delivered successfully 🤑")
                },25000)
                
                element.innerHTML = '<ion-icon name="wallet-outline"></ion-icon> Order Placed'
            }
            else{
                if(res.out == 0){

                    document.querySelector('.balance').style.display = "flex"
                }
            }

            if (res.out == 1 ) {

                document.querySelector('.out').style.display = "flex"

            }
            else{
                document.querySelector('.out').style.display = "none"
            }

          }
      })}
      else{
        alert("Invalid details please check again !")
      }
  }

  
  async function payment(){
    // var out = await check("element")
    console.log(out)
    var data = new FormData()
    console.log();
    //   data.append("pk", document.querySelector('.pk').value)
    //   data.append("quantity",document.querySelector('.quantity').value)
      data.append("csrfmiddlewaretoken",'{{ csrf_token }}')
    //   data.append("price",document.querySelector('.total').value)
      var out = 0;
      $.ajax({

          method:"POST",
          url:'/checkAll/',
          processData:false,
          contentType:false,
          // MimeType:"multipart/form-data",
          data:data,
          success:function(res){
            

            if (res.out == 1 ) {
                document.querySelector('.payment').style.display = "none"
                document.querySelector('.out').style.display = "flex"
                document.querySelector('.out').innerText = "⚠️ "+res.message + " are out of stock"
                console.log("Heyyy");

            }
            else{
                console.log("hihi");
                document.querySelector('.payment').style.display = "flex"
                 document.querySelector('.out').style.display = "none"
                 document.querySelector('.view').style.display = "none"
            }

            
            // out = res.out
            // console.log("--------------" + out);
          }
      })
    // if(out == 1){

        
    // }
    // else{
    //     document.querySelector('.payment').style.display = "block"
    //     document.querySelector('.out').style.display = "none"
    // }
  }

    // document.querySelector('.payment').style.display = "flex"
    
  

  function backView(){
    document.querySelector('.payment').style.display = "none"
    document.querySelector('.view').style.display = "flex"
  }

  function updateStock(element){
      
      var data = new FormData()

      data.append("pk", document.querySelector('.pk').value)
      data.append("stock",document.querySelector('.stock').value)
      data.append("csrfmiddlewaretoken",'{{ csrf_token }}')
    //   data.append("price",document.querySelector('.total').value)
      $.ajax({

          method:"POST",
          url:'/stock/',
          processData:false,
          contentType:false,
          // MimeType:"multipart/form-data",
          data:data,
          success:function(res){
            

                
         element.innerHTML = '<ion-icon name="bar-chart-outline"></ion-icon> Stock Updated'
         document.querySelector('.stockText').innerText = res.stock + " stocks left"

          }
      })
  }


//   function setPrice(element){
//     var price = document.querySelector('.price').value 
//     var total = 0;
//     if(element.value >=0 ){
    
//     if(element.value != 0){
//         total = price * element.value;
//         document.querySelector('.price').value = total
//         document.querySelector('.total').value = total
//         document.querySelector('.buyBtn').innerHTML = '<ion-icon name="wallet-outline"></ion-icon> Buy now ₹'+total
//     }
//     else{
//         total = price / element.value
//         document.querySelector('.price').value = total
//         document.querySelector('.total').value = total
//         document.querySelector('.buyBtn').innerHTML = '<ion-icon name="wallet-outline"></ion-icon> Buy now ₹'+total
//     }
// }
//   }

  function increase(){
        var quantity = parseInt(document.querySelector('.quantity').value)

        var price = document.querySelector('.price').value 
        var total = parseInt(document.querySelector('.total').value)
        total = total + parseInt(price);
        // document.querySelector('.price').value = total
        document.querySelector('.total').value = total
        document.querySelector('.quantity').value = quantity + 1
        document.querySelector('.buyBtn').innerHTML = '<ion-icon name="wallet-outline" style="color: #07a44b;" ></ion-icon> Buy now ₹'+total
    
  }

  function decrease(){
      var quantity = parseInt(document.querySelector('.quantity').value)
      if(quantity > 1){

    var price = document.querySelector('.price').value 
    var total = parseInt(document.querySelector('.total').value)
    total = total - parseInt(price);
        // document.querySelector('.price').value = total
    document.querySelector('.total').value = total
    document.querySelector('.quantity').value = quantity - 1
    document.querySelector('.buyBtn').innerHTML = '<ion-icon name="wallet-outline" style="color: #07a44b;" ></ion-icon> Buy now ₹'+total
}
  }
  
  
  </script>   
</body>
</html>